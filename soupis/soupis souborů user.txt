from .module_users import UsersModule
__all__ = ['UsersModule']
```

---

### **2. `module_users.py`** â­ HLAVNÃ SOUBOR

**ÃšÄel:** HlavnÃ­ vstupnÃ­ bod modulu

**Obsahuje:**
- HlavnÃ­ okno s postrannÃ­m menu
- PÅ™epÃ­nÃ¡nÃ­ mezi sekcemi
- HornÃ­ liÅ¡ta s rychlÃ½mi akcemi
- Statistiky uÅ¾ivatelÅ¯

**Sekce:**
- ğŸ‘¤ **Seznam uÅ¾ivatelÅ¯** (pÅ™ehled vÅ¡ech uÅ¾ivatelÅ¯)
- ğŸ­ **SprÃ¡va rolÃ­** (definice rolÃ­ a jejich oprÃ¡vnÄ›nÃ­)
- ğŸ” **OprÃ¡vnÄ›nÃ­** (matice oprÃ¡vnÄ›nÃ­)
- ğŸ“Š **Aktivita** (audit log, historie pÅ™ihlÃ¡Å¡enÃ­)
- ğŸ‘¥ **Online uÅ¾ivatelÃ©** (kdo je prÃ¡vÄ› pÅ™ihlÃ¡Å¡en - volitelnÄ›)
- âš™ï¸ **NastavenÃ­ modulu** (politika hesel, timeouty)

**NEVYTVÃÅ˜Ã (uÅ¾ existuje):**
- âŒ HashovÃ¡nÃ­ hesel â†’ `utils_auth.py`
- âŒ Kontrola oprÃ¡vnÄ›nÃ­ â†’ `utils_permissions.py`
- âŒ Login dialog â†’ `login_dialog.py`

---

### **3. `users_list.py`** ğŸ‘¤

**ÃšÄel:** Seznam a sprÃ¡va uÅ¾ivatelÅ¯

**Obsahuje:**

**Tabulka uÅ¾ivatelÅ¯:**
- ID
- UÅ¾ivatelskÃ© jmÃ©no (username)
- CelÃ© jmÃ©no (full_name)
- Email
- Role (admin, mechanik, recepÄnÃ­)
- AktivnÃ­ (ano/ne)
- PoslednÃ­ pÅ™ihlÃ¡Å¡enÃ­
- VytvoÅ™eno
- Akce (edit, delete, reset hesla)

**Filtry:**
- Role
- Stav (aktivnÃ­/neaktivnÃ­)
- FulltextovÃ© vyhledÃ¡vÃ¡nÃ­

**Funkce:**
- CRUD operace
- Aktivace/deaktivace uÅ¾ivatele
- Reset hesla
- Duplikace uÅ¾ivatele (kopÃ­rovÃ¡nÃ­ oprÃ¡vnÄ›nÃ­)
- HromadnÃ© akce (aktivovat, deaktivovat, smazat)

**Statistiky:**
- Celkem uÅ¾ivatelÅ¯
- AktivnÃ­ch
- Podle rolÃ­
- NovÄ› vytvoÅ™enÃ½ch (tento mÄ›sÃ­c)

---

### **4. `user_detail.py`** ğŸ“

**ÃšÄel:** Detail a editace uÅ¾ivatele

**Obsahuje:**

**ZÃ¡loÅ¾ka: ZÃ¡kladnÃ­ Ãºdaje**
- UÅ¾ivatelskÃ© jmÃ©no (unique)
- CelÃ© jmÃ©no
- Email
- Telefon
- Role (vÃ½bÄ›r)
- AktivnÃ­ (checkbox)
- PoznÃ¡mka

**ZÃ¡loÅ¾ka: BezpeÄnost**
- ZmÄ›na hesla (pro admina)
- VynucenÃ­ zmÄ›ny hesla pÅ™i dalÅ¡Ã­m pÅ™ihlÃ¡Å¡enÃ­
- DvoufaktorovÃ© ovÄ›Å™enÃ­ (volitelnÄ›, pÅ™ipraveno)
- Historie zmÄ›n hesla
- NeÃºspÄ›Å¡nÃ© pokusy o pÅ™ihlÃ¡Å¡enÃ­

**ZÃ¡loÅ¾ka: OprÃ¡vnÄ›nÃ­**
- PÅ™ehled oprÃ¡vnÄ›nÃ­ z role
- UÅ¾ivatelskÃ© vÃ½jimky (pÅ™idat/odebrat)
- Matice: modul Ã— akce (view, create, edit, delete, admin)
- VizuÃ¡lnÃ­ indikace (zelenÃ¡ = povoleno, ÄervenÃ¡ = zakÃ¡zÃ¡no)

**ZÃ¡loÅ¾ka: Aktivita**
- Historie pÅ™ihlÃ¡Å¡enÃ­
- PoslednÃ­ akce v systÃ©mu
- ZmÄ›ny provedenÃ© uÅ¾ivatelem
- IP adresy (volitelnÄ›)

**ZÃ¡loÅ¾ka: NastavenÃ­ profilu**
- Jazyk (CZ)
- TÃ©ma (svÄ›tlÃ©/tmavÃ© - pÅ™ipraveno)
- Notifikace (email, systÃ©movÃ©)
- VÃ½chozÃ­ modul po pÅ™ihlÃ¡Å¡enÃ­

**TlaÄÃ­tka:**
- ğŸ’¾ UloÅ¾it
- âŒ ZruÅ¡it
- ğŸ”‘ Reset hesla
- ğŸ—‘ï¸ Smazat uÅ¾ivatele
- ğŸ“‹ KopÃ­rovat uÅ¾ivatele

---

### **5. `roles_manager.py`** ğŸ­

**ÃšÄel:** SprÃ¡va rolÃ­ a jejich oprÃ¡vnÄ›nÃ­

**Obsahuje:**

**Seznam rolÃ­:**
- ID
- NÃ¡zev role (admin, mechanik, recepÄnÃ­, sklad, ÃºÄetnÃ­)
- Popis
- PoÄet uÅ¾ivatelÅ¯ s touto rolÃ­
- Barva (vizuÃ¡lnÃ­ rozliÅ¡enÃ­)
- VÃ½chozÃ­ role (pro novÃ© uÅ¾ivatele)

**Detail role:**
- NÃ¡zev
- Popis
- OprÃ¡vnÄ›nÃ­ (matice modulÅ¯ Ã— akcÃ­)
- Seznam uÅ¾ivatelÅ¯ s touto rolÃ­

**Funkce:**
- CRUD operace na rolÃ­ch
- KopÃ­rovÃ¡nÃ­ role (s oprÃ¡vnÄ›nÃ­mi)
- SlouÄenÃ­ rolÃ­
- Hierarchie rolÃ­ (volitelnÄ›)

**PÅ™edefinovanÃ© role:**
- **Admin** - plnÃ½ pÅ™Ã­stup
- **VedoucÃ­ servisu** - vÅ¡e kromÄ› sprÃ¡vy uÅ¾ivatelÅ¯
- **Mechanik** - zakÃ¡zky, vozidla, sklad (view)
- **RecepÄnÃ­** - zÃ¡kaznÃ­ci, zakÃ¡zky, kalendÃ¡Å™
- **SkladnÃ­k** - sklad, objednÃ¡vky
- **ÃšÄetnÃ­** - administrativa, reporty
- **Host** - pouze zobrazenÃ­ (read-only)

---

### **6. `permissions_matrix.py`** ğŸ”

**ÃšÄel:** VizuÃ¡lnÃ­ matice oprÃ¡vnÄ›nÃ­

**Obsahuje:**

**Matice:**
- Å˜Ã¡dky = moduly (dashboard, vehicles, customers, orders...)
- Sloupce = akce (view, create, edit, delete, admin)
- BuÅˆky = checkboxy (povoleno/zakÃ¡zÃ¡no)
- BarevnÃ© rozliÅ¡enÃ­

**Pohledy:**
- Podle role (vÅ¡echna oprÃ¡vnÄ›nÃ­ pro roli)
- Podle uÅ¾ivatele (vÄetnÄ› vÃ½jimek)
- Podle modulu (kdo mÃ¡ pÅ™Ã­stup)
- SrovnÃ¡nÃ­ rolÃ­ (side-by-side)

**Funkce:**
- HromadnÃ¡ Ãºprava oprÃ¡vnÄ›nÃ­
- Import/export oprÃ¡vnÄ›nÃ­
- Å ablony oprÃ¡vnÄ›nÃ­
- Audit zmÄ›n oprÃ¡vnÄ›nÃ­

**Akce (permissions):**
- `view` - zobrazenÃ­ modulu
- `create` - vytvÃ¡Å™enÃ­ zÃ¡znamÅ¯
- `edit` - editace zÃ¡znamÅ¯
- `delete` - mazÃ¡nÃ­ zÃ¡znamÅ¯
- `export` - export dat
- `admin` - administrace modulu

---

### **7. `audit_log.py`** ğŸ“Š

**ÃšÄel:** Historie aktivit a audit trail

**Obsahuje:**

**Typy udÃ¡lostÃ­:**
- ğŸ” PÅ™ihlÃ¡Å¡enÃ­ (ÃºspÄ›Å¡nÃ©/neÃºspÄ›Å¡nÃ©)
- ğŸ”“ OdhlÃ¡Å¡enÃ­
- ğŸ‘¤ VytvoÅ™enÃ­ uÅ¾ivatele
- âœï¸ Editace uÅ¾ivatele
- ğŸ—‘ï¸ SmazÃ¡nÃ­ uÅ¾ivatele
- ğŸ”‘ Reset hesla
- ğŸ­ ZmÄ›na role
- ğŸ” ZmÄ›na oprÃ¡vnÄ›nÃ­
- âš ï¸ NeÃºspÄ›Å¡nÃ© pokusy o pÅ™ihlÃ¡Å¡enÃ­

**Tabulka:**
- Datum a Äas
- UÅ¾ivatel (kdo akci provedl)
- Typ akce
- CÃ­l (na koho/co)
- Detaily (JSON)
- IP adresa (volitelnÄ›)

**Filtry:**
- ObdobÃ­
- Typ akce
- UÅ¾ivatel
- FulltextovÃ© vyhledÃ¡vÃ¡nÃ­

**Funkce:**
- Export logu (CSV, PDF)
- ÄŒiÅ¡tÄ›nÃ­ starÃ½ch zÃ¡znamÅ¯
- UpozornÄ›nÃ­ na podezÅ™elou aktivitu
- Statistiky (poÄet pÅ™ihlÃ¡Å¡enÃ­, neÃºspÄ›Å¡nÃ© pokusy)

---

### **8. `password_policy.py`** ğŸ”’

**ÃšÄel:** SprÃ¡va politiky hesel

**Obsahuje:**

**Pravidla:**
- MinimÃ¡lnÃ­ dÃ©lka hesla (8 znakÅ¯)
- VyÅ¾adovat velkÃ¡ pÃ­smena
- VyÅ¾adovat ÄÃ­sla
- VyÅ¾adovat speciÃ¡lnÃ­ znaky
- ZakÃ¡zanÃ© vzory (123456, password, admin)
- Historie hesel (nepouÅ¾Ã­t poslednÃ­ch X hesel)

**Platnost hesla:**
- MaximÃ¡lnÃ­ stÃ¡Å™Ã­ hesla (90 dnÃ­)
- UpozornÄ›nÃ­ pÅ™ed expiracÃ­ (14 dnÃ­)
- VynucenÃ­ zmÄ›ny po expirace

**ZamykÃ¡nÃ­ ÃºÄtu:**
- PoÄet neÃºspÄ›Å¡nÃ½ch pokusÅ¯ pÅ™ed zÃ¡mkem (5)
- Doba zÃ¡mku (30 minut)
- AutomatickÃ© odemknutÃ­ / manuÃ¡lnÃ­

**Validace:**
- Kontrola sÃ­ly hesla (weak, medium, strong)
- Visual feedback pÅ™i zadÃ¡vÃ¡nÃ­
- Kontrola vÅ¯Äi databÃ¡zi uniklÃ½ch hesel (volitelnÄ›)

**Funkce:**
- GenerÃ¡tor nÃ¡hodnÃ½ch hesel
- Test sÃ­ly hesla
- Export politiky

---

### **9. `user_profile.py`** ğŸ‘¤âš™ï¸

**ÃšÄel:** Profil aktuÃ¡lnÄ› pÅ™ihlÃ¡Å¡enÃ©ho uÅ¾ivatele

**Obsahuje:**

**OsobnÃ­ Ãºdaje:**
- CelÃ© jmÃ©no
- Email
- Telefon
- Avatar/fotka (volitelnÄ›)

**ZmÄ›na hesla:**
- AktuÃ¡lnÃ­ heslo
- NovÃ© heslo
- PotvrzenÃ­ hesla
- IndikÃ¡tor sÃ­ly hesla

**NastavenÃ­:**
- Jazyk aplikace
- TÃ©ma (svÄ›tlÃ©/tmavÃ©)
- VÃ½chozÃ­ modul po pÅ™ihlÃ¡Å¡enÃ­
- Notifikace (email, systÃ©movÃ©)
- FormÃ¡t data a Äasu

**Aktivita:**
- PoslednÃ­ pÅ™ihlÃ¡Å¡enÃ­
- PoÄet pÅ™ihlÃ¡Å¡enÃ­
- AktivnÃ­ sezenÃ­
- Historie hesel (bez zobrazenÃ­ hesel)

**TlaÄÃ­tka:**
- ğŸ’¾ UloÅ¾it zmÄ›ny
- ğŸ”‘ ZmÄ›nit heslo
- ğŸšª OdhlÃ¡sit se

---

### **10. `users_widgets.py`** ğŸ§©

**ÃšÄel:** Dialogy a widgety

**Obsahuje:**

**Dialogy:**
- `UserDialog` - vytvoÅ™enÃ­/editace uÅ¾ivatele
- `ResetPasswordDialog` - reset hesla (admin)
- `ChangePasswordDialog` - zmÄ›na vlastnÃ­ho hesla
- `RoleDialog` - vytvoÅ™enÃ­/editace role
- `PermissionDialog` - Ãºprava oprÃ¡vnÄ›nÃ­
- `UserSelectDialog` - vÃ½bÄ›r uÅ¾ivatele (pro jinÃ© moduly)

**Widgety:**
- `UserCard` - karta uÅ¾ivatele (mini profil)
- `RoleBadge` - Å¡tÃ­tek role (barevnÃ½)
- `PermissionCheckbox` - checkbox oprÃ¡vnÄ›nÃ­
- `PasswordStrengthMeter` - indikÃ¡tor sÃ­ly hesla
- `OnlineIndicator` - indikÃ¡tor online stavu

**ValidÃ¡tory:**
- `UsernameValidator` - validace uÅ¾ivatelskÃ©ho jmÃ©na
- `PasswordValidator` - validace hesla podle politiky
- `EmailValidator` - validace emailu

---

### **11. `users_import_export.py`** ğŸ“¤ğŸ“¥

**ÃšÄel:** Import a export uÅ¾ivatelÅ¯

**Obsahuje:**

**Export:**
- Seznam uÅ¾ivatelÅ¯ do Excel/CSV
- Export rolÃ­ a oprÃ¡vnÄ›nÃ­
- Export audit logu
- ZÃ¡loha konfigurace uÅ¾ivatelÅ¯

**Import:**
- Import uÅ¾ivatelÅ¯ z CSV/Excel
- MapovÃ¡nÃ­ sloupcÅ¯
- Validace pÅ™ed importem
- HromadnÃ© vytvoÅ™enÃ­ ÃºÄtÅ¯
- AutomatickÃ© generovÃ¡nÃ­ hesel

**FormÃ¡ty:**
- CSV
- Excel (.xlsx)
- JSON (pro zÃ¡lohu)

---

### **12. `session_manager.py`** ğŸ”„

**ÃšÄel:** SprÃ¡va sezenÃ­ (sessions) - VOLITELNÃ‰/PÅ˜IPRAVENO

**Obsahuje:**

**AktivnÃ­ sezenÃ­:**
- Seznam pÅ™ihlÃ¡Å¡enÃ½ch uÅ¾ivatelÅ¯
- ÄŒas pÅ™ihlÃ¡Å¡enÃ­
- PoslednÃ­ aktivita
- AutomatickÃ© odhlÃ¡Å¡enÃ­ po neÄinnosti

**Funkce:**
- VynucenÃ© odhlÃ¡Å¡enÃ­ uÅ¾ivatele (admin)
- Timeout sezenÃ­ (30 min neÄinnosti)
- Jedno sezenÃ­ na uÅ¾ivatele / vÃ­ce sezenÃ­
- LogovÃ¡nÃ­ aktivity

**Dashboard:**
- PoÄet aktivnÃ­ch uÅ¾ivatelÅ¯
- PrÅ¯mÄ›rnÃ¡ doba sezenÃ­
- Peak hours (kdy je nejvÃ­ce pÅ™ihlÃ¡Å¡enÃ½ch)

---

## ğŸ¨ VIZUALIZACE STRUKTURY
```
ğŸ‘¤ MODUL USERS
â”‚
â”œâ”€ ğŸ‘¤ Seznam uÅ¾ivatelÅ¯
â”‚  â”œâ”€ ğŸ“‹ Tabulka uÅ¾ivatelÅ¯
â”‚  â”œâ”€ ğŸ” Filtry a vyhledÃ¡vÃ¡nÃ­
â”‚  â”œâ”€ â• CRUD operace
â”‚  â””â”€ ğŸ“Š Statistiky
â”‚
â”œâ”€ ğŸ“ Detail uÅ¾ivatele
â”‚  â”œâ”€ ğŸ‘¤ ZÃ¡kladnÃ­ Ãºdaje
â”‚  â”œâ”€ ğŸ” BezpeÄnost (heslo, 2FA)
â”‚  â”œâ”€ ğŸ”‘ OprÃ¡vnÄ›nÃ­ (z role + vÃ½jimky)
â”‚  â”œâ”€ ğŸ“Š Aktivita (historie)
â”‚  â””â”€ âš™ï¸ NastavenÃ­ profilu
â”‚
â”œâ”€ ğŸ­ SprÃ¡va rolÃ­
â”‚  â”œâ”€ ğŸ“‹ Seznam rolÃ­
â”‚  â”œâ”€ âœï¸ Editace role
â”‚  â”œâ”€ ğŸ” OprÃ¡vnÄ›nÃ­ role
â”‚  â””â”€ ğŸ‘¥ UÅ¾ivatelÃ© v roli
â”‚
â”œâ”€ ğŸ” Matice oprÃ¡vnÄ›nÃ­
â”‚  â”œâ”€ ğŸ“Š VizuÃ¡lnÃ­ matice
â”‚  â”œâ”€ ğŸ­ Podle role
â”‚  â”œâ”€ ğŸ‘¤ Podle uÅ¾ivatele
â”‚  â””â”€ ğŸ“¤ Import/Export
â”‚
â”œâ”€ ğŸ“Š Audit log
â”‚  â”œâ”€ ğŸ” Historie pÅ™ihlÃ¡Å¡enÃ­
â”‚  â”œâ”€ âœï¸ ZmÄ›ny uÅ¾ivatelÅ¯
â”‚  â”œâ”€ ğŸ”‘ ZmÄ›ny oprÃ¡vnÄ›nÃ­
â”‚  â””â”€ âš ï¸ BezpeÄnostnÃ­ udÃ¡losti
â”‚
â”œâ”€ ğŸ”’ Politika hesel
â”‚  â”œâ”€ ğŸ“ Pravidla (dÃ©lka, znaky)
â”‚  â”œâ”€ â° Platnost hesla
â”‚  â”œâ”€ ğŸ” ZamykÃ¡nÃ­ ÃºÄtÅ¯
â”‚  â””â”€ ğŸ’ª SÃ­la hesla
â”‚
â”œâ”€ ğŸ‘¤âš™ï¸ MÅ¯j profil
â”‚  â”œâ”€ ğŸ“ OsobnÃ­ Ãºdaje
â”‚  â”œâ”€ ğŸ”‘ ZmÄ›na hesla
â”‚  â”œâ”€ âš™ï¸ NastavenÃ­
â”‚  â””â”€ ğŸ“Š Moje aktivita
â”‚
â””â”€ ğŸ“¤ğŸ“¥ Import/Export
   â”œâ”€ ğŸ“¥ Import uÅ¾ivatelÅ¯
   â”œâ”€ ğŸ“¤ Export seznamu
   â”œâ”€ ğŸ’¾ ZÃ¡loha konfigurace
   â””â”€ ğŸ“Š Export audit logu